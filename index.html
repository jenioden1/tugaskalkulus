<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kalkulator Persamaan Kuadrat</title>
    <style>
      @import url("https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css");

      body {
        background-color: #f0f0f0;
        padding: 4px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      .calculator-container {
        background-color: white;
        padding: 16px;
        border-radius: 10px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        width: 100%;
        max-width: 500px;
      }

      .input-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .input-container input {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      .button-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .result-container {
        margin-top: 16px;
        text-align: center;
      }

      .chart-container {
        border: 1px solid #ccc;
        margin-top: 16px;
      }

      .history-container {
        margin-top: 16px;
      }

      .history-container ul {
        list-style: disc;
        list-style-position: inside;
        padding-left: 20px;
      }

      @media (max-width: 768px) {
        .calculator-container {
          max-width: 100%;
        }
      }
    </style>
  </head>
  <body class="bg-gray-100 p-4">
    <body class="bg-gray-100 p-4">
      <h1 class="text-3xl font-semibold text-center text-gray-700 mb-4">
        Kalkulator Persamaan Kuadrat
      </h1>
      <div class="calculator-container bg-white p-4 rounded-lg shadow-md">
        <div class="input-container space-x-2 mb-4">
          <input
            type="number"
            id="a"
            placeholder="Masukkan nilai a"
            class="p-2 border border-gray-300 rounded"
          />
          <input
            type="number"
            id="b"
            placeholder="Masukkan nilai b"
            class="p-2 border border-gray-300 rounded"
          />
          <input
            type="number"
            id="c"
            placeholder="Masukkan nilai c"
            class="p-2 border border-gray-300 rounded"
          />
        </div>
        <button
          id="calculateButton"
          class="bg-blue-500 text-white p-2 rounded hover:bg-blue-600 cursor-pointer"
        >
          Hitung
        </button>
        <button
          id="resetButton"
          class="bg-red-500 text-white p-2 rounded hover:bg-red-600 cursor-pointer"
        >
          Reset
        </button>
        <button
          id="zoomInButton"
          class="bg-green-500 text-white p-2 rounded hover:bg-green-600 cursor-pointer"
        >
          Zoom In
        </button>
        <button
          id="zoomOutButton"
          class="bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600 cursor-pointer"
        >
          Zoom Out
        </button>
        <div class="result-container mt-4">
          <p id="result" class="text-lg text-blue-700"></p>
          <p id="extremePoint" class="text-lg text-blue-700"></p>
        </div>
        <div class="chart-container border border-gray-300 mt-4">
          <canvas
            id="quadraticChart"
            width="800"
            height="800"
            class="w-full h-full"
          ></canvas>
        </div>
        <div class="history-container mt-4">
          <h2 class="text-2xl font-semibold text-gray-700 mb-2">
            History Pengerjaan:
          </h2>
          <ul
            id="history"
            class="list-disc list-inside text-gray-700 pl-4"
          ></ul>
        </div>
      </div>
      <script>
        const calculateButton = document.getElementById("calculateButton");
        const resetButton = document.getElementById("resetButton");
        const zoomInButton = document.getElementById("zoomInButton");
        const zoomOutButton = document.getElementById("zoomOutButton");
        const resultElement = document.getElementById("result");
        const extremePointElement = document.getElementById("extremePoint");
        const canvas = document.getElementById("quadraticChart");
        const ctx = canvas.getContext("2d");
        const historyElement = document.getElementById("history");
        let zoom = 1;
        let a, b, c; // Variabel untuk menyimpan nilai a, b, c
        let roots = []; // Variabel untuk menyimpan akar-akar

        function calculateQuadratic() {
          a = parseFloat(document.getElementById("a").value);
          b = parseFloat(document.getElementById("b").value);
          c = parseFloat(document.getElementById("c").value);

          if (isNaN(a) || isNaN(b) || isNaN(c)) {
            resultElement.textContent =
              "Harap masukkan nilai a, b, dan c yang valid.";
            return;
          }

          historyElement.innerHTML = "";

          const discriminant = b ** 2 - 4 * a * c;

          if (discriminant > 0) {
            const root1 = (-b + Math.sqrt(discriminant)) / (2 * a);
            const root2 = (-b - Math.sqrt(discriminant)) / (2 * a);
            const result = `Akar-akar persamaan: x1 = ${root1.toFixed(
              2
            )} dan x2 = ${root2.toFixed(2)}`;
            resultElement.textContent = result;
            const extremeX = -b / (2 * a);
            const extremeY = a * extremeX * extremeX + b * extremeX + c;
            const extremeResult = `Titik Ekstremum: x = ${extremeX.toFixed(
              2
            )}, y = ${extremeY.toFixed(2)}`;
            extremePointElement.textContent = extremeResult;
            roots = [root1, root2];
            drawQuadraticChart();
            addToHistory(a, b, c, result, extremeResult);
          } else if (discriminant === 0) {
            const root = -b / (2 * a);
            const result = `Satu akar ganda: x = ${root.toFixed(2)}`;
            resultElement.textContent = result;
            const extremeX = -b / (2 * a);
            const extremeY = a * extremeX * extremeX + b * extremeX + c;
            const extremeResult = `Titik Ekstremum: x = ${extremeX.toFixed(
              2
            )}, y = ${extremeY.toFixed(2)}`;
            extremePointElement.textContent = extremeResult;
            roots = [root];
            drawQuadraticChart();
            addToHistory(a, b, c, result, extremeResult);
          } else {
            const result = "Persamaan tidak memiliki akar real.";
            resultElement.textContent = result;
            extremePointElement.textContent = "";
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            addToHistory(a, b, c, result, "");
            roots = [];
          }
        }

        calculateButton.addEventListener("click", calculateQuadratic);

        resetButton.addEventListener("click", function () {
          document.getElementById("a").value = "";
          document.getElementById("b").value = "";
          document.getElementById("c").value = "";
          resultElement.textContent = "";
          extremePointElement.textContent = "";
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          historyElement.innerHTML = "";
          a = b = c = undefined; // Reset nilai a, b, c
          roots = []; // Reset akar-akar
        });

        zoomInButton.addEventListener("click", function () {
          zoom *= 1.5; // Faktor perbesaran
          drawQuadraticChart();
        });

        zoomOutButton.addEventListener("click", function () {
          zoom /= 1.5; // Faktor perkecilan
          drawQuadraticChart();
        });

        function drawQuadraticChart() {
          if (
            typeof a === "undefined" ||
            typeof b === "undefined" ||
            typeof c === "undefined"
          ) {
            return; // Tidak menggambar jika nilai a, b, atau c belum diinput
          }

          const data = [];
          for (let x = -100; x <= 100; x += 0.1) {
            const y = a * x * x + b * x + c;
            data.push({ x, y });
          }

          ctx.clearRect(0, 0, canvas.width, canvas.height);

          ctx.strokeStyle = "black";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(0, canvas.height / 2);
          ctx.lineTo(canvas.width, canvas.height / 2);
          ctx.moveTo(canvas.width / 2, 0);
          ctx.lineTo(canvas.width / 2, canvas.height);
          ctx.stroke();

          ctx.fillStyle = "black";
          ctx.font = "12px Arial";

          for (let i = -100; i <= 100; i++) {
            ctx.fillText(
              i,
              i * 20 * zoom + canvas.width / 2 - 5,
              canvas.height / 2 + 15
            );
          }

          for (let i = -100; i <= 100; i++) {
            ctx.fillText(
              -i,
              canvas.width / 2 + 10,
              -i * 20 * zoom + canvas.height / 2 + 5
            );
          }

          ctx.fillStyle = "black";
          ctx.beginPath();
          for (const root of roots) {
            ctx.arc(
              root * 20 * zoom + canvas.width / 2,
              canvas.height / 2,
              6,
              0,
              Math.PI * 2
            );
            ctx.fill();
          }

          ctx.strokeStyle = "blue";
          ctx.lineWidth = 2;

          for (let i = 0; i < data.length - 1; i++) {
            ctx.beginPath();
            ctx.moveTo(
              data[i].x * 20 * zoom + canvas.width / 2,
              -data[i].y * 20 * zoom + canvas.height / 2
            );
            ctx.lineTo(
              data[i + 1].x * 20 * zoom + canvas.width / 2,
              -data[i + 1].y * 20 * zoom + canvas.height / 2
            );
            ctx.stroke();
          }
        }

        function addToHistory(a, b, c, result, extremeResult) {
          const historyItem = document.createElement("li");
          historyItem.textContent = `Persamaan: ${a}x^2 + ${b}x + ${c} - ${result} - ${extremeResult}`;
          historyElement.appendChild(historyItem);
          resultElement.textContent = "";
          extremePointElement.textContent = "";
        }
      </script>
    </body>
  </body>
</html>
